<!DOCTYPE html>
<html lang="mr">
<head>
  <meta charset="UTF-8" />
  <title>मराठी चित्रपट संग्रह</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/hls.js@1.5.1/dist/hls.min.js"></script>

  <style>
    body { font-family: 'Poppins', sans-serif; background-color: #111; color: white; }
    .movie-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem; padding: 1.5rem; }
    .movie-card { cursor: pointer; background: #1f1f1f; border-radius: 12px; overflow: hidden; transition: 0.3s; }
    .movie-card:hover { transform: scale(1.05); }
    .movie-card img { width: 100%; height: 300px; object-fit: cover; }
    .movie-title { text-align: center; padding: 1rem; font-weight: bold; color: #ffc107; }

    /* Modal */
    .modal { display: none; position: fixed; inset: 0; z-index: 1000; background: rgba(0,0,0,0.9); justify-content: center; align-items: center; }
    .modal.active { display: flex; }
    .modal iframe, .modal video { width: 90vw; height: 50vw; max-width: 900px; border-radius: 12px; border: none; background: black; }
    .close-btn { position: absolute; top: 20px; right: 30px; color: white; font-size: 2rem; cursor: pointer; z-index: 1100; }
    @media (max-width: 768px) {
      .modal iframe, .modal video { width: 95vw; height: 55vw; }
    }
  </style>
</head>

<body>
  <header class="text-center py-6 bg-gray-900 shadow">
    <h1 class="text-3xl font-bold text-yellow-400">मराठी चित्रपट संग्रह</h1>
    <p class="text-gray-400">Click to watch online</p>
  </header>

  <div class="movie-grid" id="movieGrid"></div>

  <!-- Modal -->
  <div class="modal" id="videoModal">
    <span class="close-btn" id="closeBtn">&times;</span>
    <div id="playerContainer" class="player w-full h-full flex justify-center items-center">
      <video id="modalVideo" controls playsinline></video>
    </div>
  </div>


  <script>
    const movies = [
     { title: "नवरदेव-बीएससी अ‍ॅग्री(Navardev BSc Agri)", url: "https://s8i.rackcloudservice.beauty:443/v4/qu/bcgkq/index-f2-v1-a1.txt", image: "https://m.media-amazon.com/images/M/MV5BMWJhYzUyNWUtNmY0NC00NTA3LTkxZTgtODZhZjNkZjEzMGIxXkEyXkFqcGc@._V1_FMjpg_UX1000_.jpg" },
      { title: "सायकल(Cycle)", url: "https://www.youtube.com/watch?v=QmUUNv5Gqrs", image: "https://resizing.flixster.com/-XZAfHZM39UwaGJIFWKAE8fS0ak=/v3/t/assets/p15473483_p_v8_aa.jpg" },
      { title: "पक पक पकाक(Pak Pak Pakaak)", url: "https://www.youtube.com/watch?v=gOwVfAQ7hCI", image: "https://m.media-amazon.com/images/M/MV5BN2FlODYxZjktZTQ4Yy00M2QyLWE4MGEtNWMyZmJlYTFiMjNlXkEyXkFqcGc@._V1_.jpg" },
      { title: "भाई: व्यक्‍ती की वल्ली(Bhaai - Vyakti Ki Valli)", url: "https://www.youtube.com/watch?v=LpVJyUvDg18", image: "https://m.media-amazon.com/images/M/MV5BMTRlYzlkZGYtNmFlNS00ZDk5LWI4YWItOWJlMTA3ZDM4YzhmXkEyXkFqcGc@._V1_QL75_UX190_CR0,3,190,281_.jpg" },
      { title: "देऊळ बंद(Deool Band)", url: "https://www.youtube.com/watch?v=0WST5mM-ug4", image: "https://m.media-amazon.com/images/M/MV5BMGUzMzEzNGEtNTcxOC00MTk5LTliOGYtYjkxYzA0NWQ2MzA2XkEyXkFqcGc@._V1_.jpg" },
      { title: "बालक-पालक(Balak Palak)", url: "https://www.youtube.com/watch?v=WKk5yPwnDl0", image: "https://m.media-amazon.com/images/M/MV5BM2JmZTE3ZWMtMTRkYi00YmM3LWI2OWMtNzQ4NDM4ZTA3OTg3XkEyXkFqcGc@._V1_FMjpg_UX1000_.jpg" },
      { title: "हरिश्चंद्राची फॅक्टरी(Harishchandrachi Factory)", url: "https://www.youtube.com/watch?v=-y37t7i4_-w", image: "https://m.media-amazon.com/images/M/MV5BOGMyOTgyZTItZjM0MC00YmVjLWJkMGMtNzU4MjM3NzljNGExXkEyXkFqcGc@._V1_FMjpg_UX1000_.jpg" },
      { title: "डोंबिवली फास्ट(Dombivli Fast)", url: "https://www.youtube.com/watch?v=zL61IrgOP1g", image: "https://marathimovieworld.com/images/dombivali-fast-marathi-movie-poster.jpg" },
      { title: "चश्मेबहाद्दर", url: "https://www.youtube.com/watch?v=g9lu73w8P7Y", image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTxdxfxLIhFuQHWcP7kfu0H5FhNfD6qpTIpVQ&s" },
      { title: "जोगवा", url: "https://www.youtube.com/watch?v=0lsPUiawM6U", image: "https://m.media-amazon.com/images/M/MV5BYjgzOGFkOTUtMTNkMC00ODUwLTg2ZmMtMzFlMTZhNmNkYmZjXkEyXkFqcGc@._V1_FMjpg_UX1000_.jpg" },
      { title: "अगं बाई अरेच्चा", url: "https://www.youtube.com/watch?v=TgKICdOfD-k", image: "https://m.media-amazon.com/images/M/MV5BN2VhZjI1YWMtMjlhOC00MWQ0LTg3YmYtZDMzNjM2NTIzYjQzXkEyXkFqcGc@._V1_.jpg" },
      { title: "खबरदार(Khabardar)", url: "https://www.youtube.com/watch?v=Qo_dIT0NErY", image: "https://m.media-amazon.com/images/M/MV5BYjIxODY1YTktMDhjYS00ZTUyLTg3ZjctYjk5NjFlZDhjZmJlXkEyXkFqcGc@._V1_.jpg" },
      { title: "जत्रा(Jatra)", url: "https://www.youtube.com/watch?v=qfv5ECUkikg", image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSgIndKPwa-sj_ZI20x6TPp6wX85kWZbb-_rA&s" },
      { title: "गल्लीत गोंधळ दिल्लीत मुजरा(Gallit Gondhal Dillit Mujra)", url: "https://www.youtube.com/watch?v=ktdc1vxRZYk", image: "https://m.media-amazon.com/images/I/718dMrDoomL._UF1000,1000_QL80_.jpg" },
      { title: "अशी ही बनवाबनवी(Ashi Hi Banwa Banwi)", url: "https://www.youtube.com/watch?v=ruEchEsYzS4", image: "https://m.media-amazon.com/images/M/MV5BMzZhNzk1ZTktYzEyNi00MjA5LThjYjAtNGE0ZDNmZjFlNDMyXkEyXkFqcGc@._V1_.jpg" },
      { title: "चौक(Chowk)", url: "https://www.youtube.com/watch?v=5M-A8ANuD_Y", image: "https://assets-in.bmscdn.com/iedb/movies/images/mobile/thumbnail/xlarge/chowk-et00359174-1683629590.jpg" },
      { title: "केसरी(Kesari)", url: "https://www.youtube.com/watch?v=Vs5aelfiuAk", image: "https://in.bmscdn.com/events/moviecard/ET00123996.jpg" },
      { title: "झेंडा(Zenda)", url: "https://eTOjdo3Yv1iw.bearishxksezojbtu.cfd/UuW41VuwCiSR/hls3/01/02901/9lp26u0l8bwo_n/master.txt", image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSNJpR1fjz4UKpmjFlN4gsVLZLz5sSNFBXxag&s" },
      { title: "किल्ला(Killa)", url: "https://streamtape.com/e/KZpj6MxgrLh0mPG/", image: "https://in.bmscdn.com/events/moviecard/ET00028962.jpg" },
      { title: "ठाकरे(Thackeray)", url: "https://vgorigin.hakunaymatata.com/resource/f2312921f3440863f7057cee077c0cfb.mp4?Expires=1750793259&KeyName=wefeed&Signature=n-2H8w537uDfeyBDO89sWA3K5zSznkHEMkRxgGRHAqCSOIrNbUsHZKCbfRYIM-r-ckJLFw5XewJriaOytOLOCw", image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQp_HRGkEZtI0u0YOCGv2h4KyvuAMFvegYB4Q&s" },
      { title: "वळू (Valu)", url: "https://www.youtube.com/watch?v=fwbEnOX3gLk", image: "https://m.media-amazon.com/images/M/MV5BOWExNWRjMjgtOTAwMS00MWI0LTkxZGUtZjFhZTRiNGZkN2M4XkEyXkFqcGc@._V1_QL75_UY281_CR155,0,190,281_.jpg" },
      { title: "दशावतार(Dashavatar)", url: "https://streamtape.com/e/Oo6LjMOb6zTZAgD/", image: "https://upload.wikimedia.org/wikipedia/en/thumb/6/66/Dashavatar_Marathi_movie.jpg/250px-Dashavatar_Marathi_movie.jpg" },
       { title: "संत तुकाराम(Sant Tukaram)", url: "https://www.youtube.com/embed/IQHpDpAG9hk", image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTvta5UrpekYQ2hwl3OAMqOw9V7FArH0iIbYi0O-JNRs_kBNpOjmEzG8vnNKS1f-ffl12U&usqp=CAU" },
      { title: "तुकाराम (Tukaram)", url: "https://streamtape.com/v/6RwvRG4VQvIv1d/", image: "https://images.plex.tv/photo?size=large-1280&url=https%3A%2F%2Fmetadata-static.plex.tv%2Fc%2Fgracenote%2Fc6a4001ae0abaabf16aeb0dd7d251d45.jpg" },
      { title: "अभंग तुकाराम(Abhanga Tukaram)", url: "https://streamtape.com/e/MrYrXzYAYVUmbBM/", image: "https://updatenownews.com/wp-content/uploads/2025/08/tukaram.jpg" },
     
   
    ];

   /* ================= UTILITIES ================= */
    function isYouTube(url) { return /youtu/i.test(url); }
    function isHls(url) { return url.includes('.m3u8') || url.includes('index-') || /\.txt/i.test(url); }
    function isMP4(url) { return /\.mp4/i.test(url); }
    function isMega(url) { return url.includes('mega.nz'); }
    function isStreamtape(url) { return url.includes('streamtape.com'); }

    const grid = document.getElementById("movieGrid");
    const modal = document.getElementById("videoModal");
    const modalVideo = document.getElementById("modalVideo");
    const playerContainer = document.getElementById("playerContainer");
    const closeBtn = document.getElementById("closeBtn");
    let currentHls = null;

    function showModal() {
      modal.classList.add("active");
      document.body.style.overflow = "hidden";
    }

    function hideModal() {
      modal.classList.remove("active");
      document.body.style.overflow = "";
    }

    function resetPlayer() {
      if (currentHls) { try { currentHls.destroy(); } catch(e){} currentHls = null; }
      playerContainer.innerHTML = `<video id="modalVideo" controls playsinline></video>`;
    }

    /* ================= PLAYBACK LOGIC ================= */
    function playInModal(title, url) {
      resetPlayer();
      const videoEl = document.getElementById("modalVideo");

      // STREAMTAPE
      if (isStreamtape(url)) {
        playerContainer.innerHTML = `<iframe src="${url}" allow="autoplay; fullscreen" allowfullscreen frameborder="0"></iframe>`;
        showModal();
        return;
      }

      // YOUTUBE
      if (isYouTube(url)) {
        const videoId = url.includes("v=") ? new URL(url).searchParams.get("v") : url.split("/").pop();
        playerContainer.innerHTML = `<iframe src="https://www.youtube.com/embed/${videoId}?autoplay=1&modestbranding=1&rel=0"
          allow="autoplay; encrypted-media; fullscreen" frameborder="0"></iframe>`;
        showModal();
        return;
      }

      // MEGA
      if (isMega(url)) {
        playerContainer.innerHTML = `<iframe src="${url}" allow="fullscreen" allowfullscreen frameborder="0"></iframe>`;
        showModal();
        return;
      }

      // HLS
      if (isHls(url)) {
        if (Hls.isSupported()) {
          currentHls = new Hls();
          currentHls.loadSource(url);
          currentHls.attachMedia(videoEl);
          currentHls.on(Hls.Events.MANIFEST_PARSED, () => {
            showModal();
            videoEl.play().catch(()=>{});
          });
        } else {
          videoEl.src = url;
          showModal();
          videoEl.play().catch(()=>{});
        }
        return;
      }

      // MP4
      if (isMP4(url)) {
        videoEl.src = url;
        showModal();
        videoEl.play().catch(()=>{});
        return;
      }

      // FALLBACK
      window.location.href = `player.html?title=${encodeURIComponent(title)}&video=${encodeURIComponent(url)}`;
    }

    /* ================= CLOSE PLAYER ================= */
    function closePlayer() {
      resetPlayer();
      hideModal();
    }

    closeBtn.addEventListener("click", closePlayer);
    modal.addEventListener("click", (e) => { if (e.target === modal) closePlayer(); });

    /* ================= RENDER MOVIES ================= */
    movies.forEach(movie => {
      const div = document.createElement("div");
      div.className = "movie-card";
      div.innerHTML = `<img src="${movie.image}" alt="${movie.title}"><div class="movie-title">${movie.title}</div>`;
      div.onclick = () => playInModal(movie.title, movie.url);
      grid.appendChild(div);
    });
  </script>
</body>
</html>
